<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>防詐數據視覺化體驗平台</title>
  <style>
    body { font-family: "Microsoft JhengHei", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin:0; background:#fafafa; color:#333 }
    header { background:#f7b500; color:#fff; padding:16px 12px; text-align:center }
    main { max-width:900px; margin:24px auto; padding:0 16px }
    section { display:none; background:#fff; padding:20px; border-radius:12px; box-shadow:0 8px 30px rgba(0,0,0,.06) }
    section.active { display:block }
    h1,h2 { margin:0 0 12px }
    nav#breadcrumb { font-size:13px; opacity:.9 }
    label { display:block; margin:12px 0 }
    input, select, textarea, button { width:100%; font-size:16px; padding:10px 12px; border:1px solid #ddd; border-radius:8px; box-sizing:border-box }
    textarea { min-height:96px }
    button { background:#f7b500; color:#fff; border:none; cursor:pointer }
    button[disabled] { opacity:.6; cursor:not-allowed }
    button:hover { background:#e09e00 }
    .row { display:grid; grid-template-columns:1fr 1fr; gap:12px }
    .button-row { display:flex; gap:12px; justify-content:space-between }
    progress { width:100%; height:16px; margin:8px 0 12px }
    #chart-area img { max-width:100%; border-radius:10px; cursor:zoom-in; }
    #slider-wrap { display:none; text-align:center; gap:8px; align-items:center; margin-top:10px }
    #slider-value { min-width:48px; display:inline-block }
    table { width:100%; border-collapse:collapse; margin:10px 0 18px }
    th, td { border:1px solid #eaeaea; padding:8px; text-align:center }
    th { background:#fff3cd }
    .callout { background:#fffbe6; border:1px solid #ffe58f; padding:12px; border-radius:10px; font-size:14px }
    .muted { color:#777; font-size:13px }
    .success { color:#0a7a28 }
    dialog img { max-width:90vw; max-height:90vh }
  </style>
</head>
<body>
  <header>
    <h1>防詐數據視覺化體驗平台</h1>
    <nav id="breadcrumb">資料 → 作答 → 問卷 → 送出</nav>
  </header>
  <main>
    <!-- (前面所有 HTML 原樣略…) -->

    <section id="survey-section">
      <h2>3) 主觀問卷</h2>
      <div id="survey-forms"></div>
      <div class="row">
        <label>最偏好圖表類型
          <select id="preference">
            <option value="">請選擇</option>
            <option value="line">折線圖</option>
            <option value="bar">長條圖</option>
            <option value="heat">熱點圖</option>
          </select>
        </label>
        <label>其他意見<textarea id="open-feedback" placeholder="（選填）"></textarea></label>
      </div>
      <button id="finish-btn">完成</button>
    </section>

    <!-- (後面所有 HTML 原樣略…) -->
  </main>

  <dialog id="img-dialog"><img id="dialog-img" /></dialog>

<script>
/*（前面所有 JavaScript 原樣略…）*/

/* ★★★★★★★★★★★★★★★★★★★★★★★
   ★ 修改重點：在評分表格前插入圖片
   ★★★★★★★★★★★★★★★★★★★★★★★ */
function buildSurvey(){
  const host = $('#survey-forms'); 
  host.innerHTML = '';

  const chartImages = {
    line: 'assets/line_trend_1920x1080b.png',
    bar:  'assets/bar_top10_1920x1080b.png',
    heat: 'assets/heat_month_1920x1080b.png'
  };

  ['line','bar','heat'].forEach(type => {

    // ★ 新增：插入對應圖片
    host.insertAdjacentHTML('beforeend', `
      <div style="text-align:center; margin:20px 0;">
        <img src="${chartImages[type]}" 
             style="max-width:80%; border-radius:10px; border:1px solid #ccc; margin-bottom:12px;">
      </div>
    `);

    // 原本的評分表格（不變）
    let html = `<table>
                  <tr><th colspan="6">${type.toUpperCase()} 圖表評分</th></tr>
                  <tr><th>構面</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr>`;
    SURVEY_DIMENSIONS.forEach((d,i) => {
      html += `<tr><td>${d}</td>` +
              [1,2,3,4,5].map(v =>
                `<td><input type="radio" name="${type}_${i+1}" value="${v}"></td>`
              ).join('') +
              '</tr>';
    });
    html += '</table>';

    host.insertAdjacentHTML('beforeend', html);
  });
}

/*（後面所有 JavaScript 完整保留…）*/

</script>

</body>
</html>


